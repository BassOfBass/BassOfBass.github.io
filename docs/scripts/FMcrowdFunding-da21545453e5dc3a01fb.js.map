{"version":3,"sources":["webpack://github-site/./src/frontend-mentor/crowdfunding/crowdfunding.js"],"names":["form","closeButton","pledges","confirmation","confInput","successModal","successButton","successTitle","docBody","document","body","header","querySelector","main","pledgeForm","burger","menu","addEventListener","event","classList","toggle","initHeader","detailsSection","section","pledgeButton","bookmarkButton","bookmarkSign","scrollIntoView","contains","textContent","initHeroSection","stopPropagation","title","target","closest","pledge","querySelectorAll","formTitle","findFormPledge","radio","focus","click","initDetailsSection","initMain","input","value","appendChild","add","preventDefault","elements"],"mappings":"iNAyIwBA,EAChBC,EACAC,EACAC,EACAC,EACAC,EACAC,EAIAC,EAjJMC,EAAYC,SAAlBC,KAIFC,EAASF,SAASG,cAAc,YAChCC,EAAOJ,SAASG,cAAc,QAC9BE,EAAaL,SAASG,cAAc,aAU1C,SAAoBD,EAAQD,GAI1B,IAAMK,EAASJ,EAAOC,cAAc,YAC9BI,EAAOL,EAAOC,cAAc,mBAElCG,EAAOE,iBAAiB,SAKxB,SAAsBC,GACpBH,EAAOI,UAAUC,OAAO,SACxBJ,EAAKG,UAAUC,OAAO,QACtBV,EAAKS,UAAUC,OAAO,YAvB1BC,CAAWV,EAAQH,GA+BnB,SAAkBK,EAAMC,GACtB,IAAMQ,EAAiBT,EAAKD,cAAc,oBAU1C,SAAyBW,EAAST,GAChC,IAAMU,EAAeD,EAAQX,cAAc,eACrCa,EAAiBF,EAAQX,cAAc,aACvCc,EAAeD,EAAeb,cAAc,SAElDY,EAAaP,iBAAiB,SAG9B,WACEH,EAAWK,UAAUC,OAAO,QAC5BN,EAAWa,oBAJbF,EAAeR,iBAAiB,SAOhC,WACEQ,EAAeN,UAAUC,OAAO,UAC5BK,EAAeN,UAAUS,SAAS,UACpCF,EAAaG,YAAc,aAE3BH,EAAaG,YAAc,eAzBjCC,CAFoBjB,EAAKD,cAAc,gBAEVE,GAmC7B,SAA4BS,EAAST,GAIrBS,EAAQX,cAAc,UAE9BK,iBAAiB,SAMvB,SAA0BC,GACxBA,EAAMa,kBAIN,IAEMC,EAFSd,EAAMe,OACDC,QAAQ,SACTtB,cAAc,UAAUiB,YAErCM,EAkBV,SAAwBrB,EAAYkB,GAClC,IACIG,EAFqC,I,w5BAAA,CACtBrB,EAAWsB,iBAAiB,WADN,IAIzC,2BAAoC,KAAzBC,EAAyB,QAClC,GAAIA,EAAUR,cAAgBG,EAAO,CACnCG,EAASE,EAAUH,QAAQ,WAC3B,QAPqC,8BAWzC,OAAOC,EA7BUG,CAAexB,EAAYkB,GAIpCO,EAAQJ,EAAOvB,cAAc,WAEnCE,EAAWK,UAAUC,OAAO,QAC5Be,EAAOR,iBACPQ,EAAOK,QACPD,EAAME,WAhEVC,CAAmBpB,EAAgBR,GAnCrC6B,CAAS9B,EAAMC,GA+HPb,GADgBD,EA7HTc,GA8HYF,cAAc,mBACjCV,EAAUF,EAAKY,cAAc,mBAC7BT,EAAeH,EAAKY,cAAc,iBAClCR,EAAYD,EAAaS,cAAc,SAEvCN,GADAD,EAAeL,EAAKY,cAAc,aACLA,cAAc,eAI3CL,EAAeF,EAAaO,cAAc,UAEhDX,EAAYgB,iBAAiB,SAK7B,WACEjB,EAAKmB,UAAUC,OAAO,WALxBpB,EAAKiB,iBAAiB,SAWtB,SAA4BC,GAC1BA,EAAMa,kBAIN,IAAMa,EAAQ1B,EAAMe,OACdE,EAASS,EAAMV,QAAQ,WAE7B9B,EAAUyC,MAAQD,EAAMC,MAExBV,EAAOW,YAAY3C,GAEdA,EAAagB,UAAUS,SAAS,aACnCzB,EAAagB,UAAU4B,IAAI,eAvB/B/C,EAAKiB,iBAAiB,UA8BtB,SAAsBC,GACpBA,EAAM8B,iBAKN,IAKMhB,EALQd,EAAMe,OAAOgB,SAAb,SAIOf,QAAQ,WACRtB,cAAc,UAAUiB,YAE7CtB,EAAasB,YAAcG,EAE3B9B,EAAQiB,UAAUC,OAAO,QACzBf,EAAac,UAAUC,OAAO,QAC9Bf,EAAasB,oBA9CfrB,EAAcW,iBAAiB,SAoD/B,SAAuBC,GACrBlB,EAAKmB,UAAUC,OAAO,a","file":"scripts/FMcrowdFunding-da21545453e5dc3a01fb.js","sourcesContent":["import \"./styles/main.scss\";\r\n\r\nconst { body: docBody } = document;\r\n/**\r\n * @type HTMLElement\r\n */\r\nconst header = document.querySelector(\".gheader\");\r\nconst main = document.querySelector(\"main\");\r\nconst pledgeForm = document.querySelector(\".pledges\");\r\n\r\ninitHeader(header, docBody);\r\ninitMain(main, pledgeForm);\r\ninitPledgeForm(pledgeForm);\r\n\r\n/**\r\n * @param {HTMLElement} header \r\n * @param {HTMLElement} body\r\n */\r\nfunction initHeader(header, body) {\r\n  /**\r\n   * @type HTMLButtonElement\r\n   */\r\n  const burger = header.querySelector(\".gburger\");\r\n  const menu = header.querySelector(\".burger-wrapper\");\r\n\r\n  burger.addEventListener(\"click\", handleBurger);\r\n\r\n  /**\r\n   * @param {MouseEvent} event \r\n   */\r\n  function handleBurger(event) {\r\n    burger.classList.toggle(\"close\");\r\n    menu.classList.toggle(\"show\");\r\n    body.classList.toggle(\"modal\");\r\n  }\r\n}\r\n\r\n/**\r\n * @param {HTMLElement} main \r\n * @param {HTMLFormElement} pledgeForm\r\n */\r\nfunction initMain(main, pledgeForm) {\r\n  const detailsSection = main.querySelector(\"section.details\");\r\n  const heroSection = main.querySelector(\"section.hero\");\r\n\r\n  initHeroSection(heroSection, pledgeForm);\r\n  initDetailsSection(detailsSection, pledgeForm);\r\n\r\n  /**\r\n   * @param {HTMLElement} section \r\n   * @param {HTMLFormElement} pledgeForm\r\n   */\r\n  function initHeroSection(section, pledgeForm) {\r\n    const pledgeButton = section.querySelector(\".pay-to-pay\");\r\n    const bookmarkButton = section.querySelector(\".bookmark\");\r\n    const bookmarkSign = bookmarkButton.querySelector(\".sign\");\r\n\r\n    pledgeButton.addEventListener(\"click\", handlePledge);\r\n    bookmarkButton.addEventListener(\"click\", handleBookmark);\r\n\r\n    function handlePledge() {\r\n      pledgeForm.classList.toggle(\"show\");\r\n      pledgeForm.scrollIntoView();\r\n    }\r\n\r\n    function handleBookmark() {\r\n      bookmarkButton.classList.toggle(\"marked\");\r\n      if (bookmarkButton.classList.contains(\"marked\")) {\r\n        bookmarkSign.textContent = \"Bookmarked\";\r\n      } else {\r\n        bookmarkSign.textContent = \"Bookmark\";\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @param {HTMLElement} section\r\n   * @param {HTMLFormElement} pledgeForm\r\n   * @param {NodeListOf<HTMLElement>} formTitles\r\n   */\r\n  function initDetailsSection(section, pledgeForm) {\r\n    /**\r\n     * @type HTMLElement\r\n     */\r\n    const tiers = section.querySelector(\".tiers\");\r\n\r\n    tiers.addEventListener(\"click\", handleTierChoice);\r\n\r\n    /**\r\n     * TODO: send info to modal;\r\n     * @param {MouseEvent} event \r\n     */\r\n    function handleTierChoice(event) {\r\n      event.stopPropagation();\r\n      /**\r\n       * @type HTMLButtonElement\r\n       */\r\n      const button = event.target;\r\n      const tier = button.closest(\".tier\");\r\n      const title = tier.querySelector(\".title\").textContent;\r\n      ;\r\n      const pledge = findFormPledge(pledgeForm, title);\r\n      /**\r\n       * @type HTMLInputElement\r\n       */\r\n      const radio = pledge.querySelector(\".reward\");\r\n\r\n      pledgeForm.classList.toggle(\"show\");\r\n      pledge.scrollIntoView();\r\n      pledge.focus();\r\n      radio.click();\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * @param {HTMLFormElement} pledgeForm \r\n   * @param {string} title \r\n   * @returns {HTMLElement}\r\n   */\r\n  function findFormPledge(pledgeForm, title) {\r\n    const formTitles = pledgeForm.querySelectorAll(\".title\");\r\n    let pledge;\r\n\r\n    for (const formTitle of formTitles) {\r\n      if (formTitle.textContent === title) {\r\n        pledge = formTitle.closest(\".pledge\");\r\n        break;\r\n      }\r\n    }\r\n\r\n    return pledge;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {HTMLFormElement} form \r\n */\r\nfunction initPledgeForm(form) {\r\n  const closeButton = form.querySelector(\".close > button\");\r\n  const pledges = form.querySelector(\".pledge-choices\");\r\n  const confirmation = form.querySelector(\".confirmation\");\r\n  const confInput = confirmation.querySelector(\"input\");\r\n  const successModal = form.querySelector(\".success\");\r\n  const successButton = successModal.querySelector(\".pay-to-pay\");\r\n  /**\r\n   * @type HTMLSpanElement\r\n   */\r\n  const successTitle = successModal.querySelector(\".title\");\r\n\r\n  closeButton.addEventListener(\"click\", handleClosing);\r\n  form.addEventListener(\"input\", appendConfirmation);\r\n  form.addEventListener(\"submit\", handlePledge);\r\n  successButton.addEventListener(\"click\", acceptSuccess); \r\n\r\n  function handleClosing() {\r\n    form.classList.toggle(\"show\");\r\n  };\r\n\r\n  /**\r\n   * @param {Event} event \r\n   */\r\n  function appendConfirmation(event) {\r\n    event.stopPropagation();\r\n    /**\r\n     * @type HTMLInputElement\r\n     */\r\n    const input = event.target;\r\n    const pledge = input.closest(\".pledge\");\r\n\r\n    confInput.value = input.value;\r\n    \r\n    pledge.appendChild(confirmation);\r\n\r\n    if (!confirmation.classList.contains(\"appended\")) {\r\n      confirmation.classList.add(\"appended\");\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * @param {Event} event \r\n   */\r\n  function handlePledge(event) {\r\n    event.preventDefault();\r\n\r\n    /**\r\n     * @type HTMLInputElement\r\n     */\r\n    const money = event.target.elements[\"currency\"];\r\n    /**\r\n     * @type HTMLElement\r\n     */\r\n    const pledge = money.closest(\".pledge\");\r\n    const title = pledge.querySelector(\".title\").textContent;\r\n    \r\n    successTitle.textContent = title;\r\n\r\n    pledges.classList.toggle(\"hide\")\r\n    successModal.classList.toggle(\"show\");\r\n    successModal.scrollIntoView();\r\n  }\r\n\r\n  /**\r\n   * @param {MouseEvent} event \r\n   */\r\n  function acceptSuccess(event) {\r\n    form.classList.toggle(\"show\");\r\n  }\r\n}\r\n"],"sourceRoot":""}